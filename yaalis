#!/bin/bash

USER=hsp

# disk stuff
gdisk

# efi code = ef00
# efi partition size = 512M
# efi mount to /boot

#mkfs.vfat -F32 /dev/sd**
#mfks.*

#mount root and boot

# install base
pacstrap /mnt base base-devel gummiboot git

# mount 
arch-chroot /mnt

# symlink from /usr/share/zoneinfo/* to /etc/localtime

# locale stuff
echo en_US.UTF-8 UTF-8 >> /etc/locale.gen
echo en_US.ISO-8859-1 >> /etc/locale.gen
echo ko_KR.EUC-KR EUC-KR >> /etc/locale.gen
echo ko_KR.UTF-8 UTF-8 >> /etc/locale.gen
locale-gen

# create locale.conf
echo LANG="en_US.UTF-8" > /etc/locale.conf
echo LC_COLLATE="C" >> /etc/locale.conf
echo LC_TIME="en_US.UTF-8" >> /etc/locale.conf

# edit mkinitcpio
vi /etc/mkinitcpio.conf
mkinitcpio -p linux

# edit settings
vi /etc/fstab

# set bootloader
gummiboot install
# it will probably fail to create the entry
# manually create entry in /boot/loader/entries/arch.conf
# Ex:
#
# title   Arch Linux
# linux   /vmlinuz-linux
# initrd  /initramfs-linux.img
# options root=/dev/sd## rw

# set passwd
passwd

# wifi stuff
pacman -S iw wpa_supplicant dialog

# user stuff
pacman -S sudo
visudo

# make user
useradd -m -g users -G wheel,adm,systemd-journal -s /bin/bash $USER
passwd $USER
